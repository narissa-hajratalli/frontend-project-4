{"remainingRequest":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/src/views/Home.vue","mtime":1600396970809},{"path":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/narissa.k.hajratalli/Documents/GA-SEI/project-4-python-django/project-4/p4frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGRhdGE6IGZ1bmN0aW9uKCl7CiAgICByZXR1cm4gewogICAgICBkYWlseUxvZ3M6IFtdLAogICAgICB3ZWVrczogW10KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCl7CiAgICBjb25zdCB7dG9rZW4sIFVSTH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQoKICAgIC8vIEFQSSBDQUxMLCBmZXRpbmcgZnJvbSB0aGUgL2RhaWx5X2NvbnN1bXB0aW9uIGVuZHBvaW50LCB3aGljaCBnYXRoZXJzIGFsbCB0aGUgZGFpbHkgbG9ncyBpbgogICAgLy8gdGhlIGRhdGFiYXNlLCByZWdhcmRsZXNzIG9mIHdlZWsuIAogICAgZmV0Y2goYCR7VVJMfS9tZWF0X2NvbnN1bXB0aW9uL2RhaWx5X2NvbnN1bXB0aW9uL2AsIHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgaGVhZGVyczogewogICAgICAgICdhdXRob3JpemF0aW9uJzogYEpXVCAke3Rva2VufWAKICAgICAgfQogICAgfSkKICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgIC50aGVuKGRhdGEgPT4gewogICAgICB0aGlzLmRhaWx5TG9ncyA9IGRhdGEKICAgIH0pCiAgfSwKCiAgLy8vLy8vLy8vIFBPUFVMQVRJTkcgVEhFIFdFRUtTIElOIEEgRFJPUERPV04gTUVOVSAvLy8vLy8KICAvLy8vIGJlZm9yZUNyZWF0ZWQ6IENhbGxlZCBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBpbml0aWFsaXplZAogIC8vLy8gaHR0cHM6Ly92dWVqcy5vcmcvdjIvYXBpLyNjcmVhdGVkCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbigpIHsKICAgIC8vIEdyYWJzIHRoZSB0b2tlbiBhbmQgdGhlIFVSTAogICAgY29uc3Qge3Rva2VuLCBVUkx9ID0gdGhpcy4kcm91dGUucXVlcnkKCiAgICAvL0FQSSBDQUxMIC0gZmV0Y2hlcyBhbGwgdGhlIHdlZWtzIGluIHRoZSBkYXRhYmFzZQogICAgZmV0Y2goYCR7VVJMfS9tZWF0X2NvbnN1bXB0aW9uL3dlZWtseV9jb25zdW1wdGlvbi9gLCB7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnYXV0aG9yaXphdGlvbic6IGBKV1QgJHt0b2tlbn1gCiAgICAgIH0KICAgIH0pCiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAudGhlbihkYXRhID0+IHsKICAgICAgdGhpcy53ZWVrcyA9IGRhdGEKICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgIH0pCiAgfSwKCiAgLy8vLy8vLyBNRVRIT0QgQVNTT0NJQVRFIFdJVEggVEhFIEJVVFRPTiBUTyBGSU5EIFRIRSBEQUlMWSBMT0dTIEZPUiBPTkUgV0VFSyAvLy8vLwoKCiAgLy8vLy8gTUVUSE9EIFRPIEhBVkUgVEhFIFVTRVIgU1RBWSBMT0dHRUQgSU4gV0hFTiBUSEVZIFJFRlJFU0ggLy8vCiAgc3RheV9sb2dnZWRfaW46IGZ1bmN0aW9uKCkgewogICAgICBjb25zdCBnZXRMb2dpbiA9IEpTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2luJykpCiAgICAgIGlmIChnZXRMb2dpbikgewogICAgICB0aGlzLnVzZXIgPSBnZXRMb2dpbi51c2VyCiAgICAgIHRoaXMudG9rZW4gPSBnZXRMb2dpbi50b2tlbgogICAgICB0aGlzLmxvZ2dlZGluID0gdHJ1ZQogICAgfQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template v-if=\"loggedIn\">\n  <div class=\"home\">\n    <h1> HOME PAGE</h1>\n    <ul>\n      <li v-for=\"dailyLog of dailyLogs\" v-bind:key=\"dailyLog.id\">{{ dailyLog.daily_servings }}</li>\n    </ul>\n\n    <!-- DROPDOWN MENU CONTAINING EACH WEEK --> \n    <section v-if=\"loggedIn\">\n        <b-field label=\"Select a Weekly Log\">\n            <b-select placeholder=\"Select a week\">\n                <!-- v-for directive loops over all the weeks in the database --> \n                <!-- and populates each week in the dropdown menu --> \n                <!-- also making each field in the dropdown menu associate with the week's id --> \n                <option\n                    v-for=\"week in weeks\"\n                    :id=\"week.id\" \n                    :value=\"week.id\"\n                    :key=\"week.id\">\n                    <!-- This selects just what the week's number is in the database and interpolates it with -->\n                    <!-- the word \"Week\" to maintain consistent spelling -->  \n                    {{ `Week ${week.week_number}` }}\n                </option>\n            </b-select><b-button type=\"is-success\">Find</b-button><b-button type=\"is-success is-light\">Add</b-button>\n        </b-field>\n    </section>\n    \n    \n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'Home',\n  data: function(){\n    return {\n      dailyLogs: [],\n      weeks: []\n    }\n  },\n  created: function(){\n    const {token, URL} = this.$route.query\n\n    // API CALL, feting from the /daily_consumption endpoint, which gathers all the daily logs in\n    // the database, regardless of week. \n    fetch(`${URL}/meat_consumption/daily_consumption/`, {\n      method: 'get',\n      headers: {\n        'authorization': `JWT ${token}`\n      }\n    })\n    .then(response => response.json())\n    .then(data => {\n      this.dailyLogs = data\n    })\n  },\n\n  ///////// POPULATING THE WEEKS IN A DROPDOWN MENU //////\n  //// beforeCreated: Called synchronously immediately after the instance has been initialized\n  //// https://vuejs.org/v2/api/#created\n  beforeCreate: function() {\n    // Grabs the token and the URL\n    const {token, URL} = this.$route.query\n\n    //API CALL - fetches all the weeks in the database\n    fetch(`${URL}/meat_consumption/weekly_consumption/`, {\n      method: 'get',\n      headers: {\n        'authorization': `JWT ${token}`\n      }\n    })\n    .then(response => response.json())\n    .then(data => {\n      this.weeks = data\n      console.log(data)\n    })\n  },\n\n  /////// METHOD ASSOCIATE WITH THE BUTTON TO FIND THE DAILY LOGS FOR ONE WEEK /////\n\n\n  ///// METHOD TO HAVE THE USER STAY LOGGED IN WHEN THEY REFRESH ///\n  stay_logged_in: function() {\n      const getLogin = JSON.parse(window.sessionStorage.getItem('login'))\n      if (getLogin) {\n      this.user = getLogin.user\n      this.token = getLogin.token\n      this.loggedin = true\n    }\n  }\n}\n</script>\n"]}]}